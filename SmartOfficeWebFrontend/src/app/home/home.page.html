<ion-header>
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-menu-button></ion-menu-button>
    </ion-buttons>
    <ion-title>
      Raumübersicht
    </ion-title>
  </ion-toolbar>
</ion-header>

<ion-content>
  <ion-item>
      <ion-label item-end>Liste</ion-label>
      <ion-toggle [(ngModel)]="toggleMapOrList" checked="true" (ionChange)="update()"></ion-toggle>
      <ion-label item-start>Übersichts-Map</ion-label>
  </ion-item>
  <ion-item>
    <ion-button (click)="reload()" item-end>Aktualisieren</ion-button>
  </ion-item>
  <!-- Image Map Generated by http://www.image-map.net/ -->
  <div id="image-container_small" *ngIf="toggleMapOrList">
    <img src="/assets/test1.jpg" usemap="#image-map_small" width="300" height="296">
    <map name="image-map_small">
        <area target="" alt="Büro1" title="Büro1" (click)="goToCreatPage('r1')" coords="13,148,135,148,135,280,13,280" shape="poly">
        <area target="" alt="Büro2" title="Büro2" (click)="goToCreatPage('r2')" coords="285,148,187,148,187,280,285,280" shape="poly">
        <area target="" alt="Büro3" title="Büro3" (click)="goToCreatPage('r3')" coords="13,14,120,14,120,142,13,142" shape="poly">
    </map>
    <!--
      rot: rgba(255,0,0,0.5)
      grün: rgba(0,255,0,0.5)
      orange: rgba(255,69,0,0.5)
    -->
    <div class="overlay" style="width:300px; height: 296px;" >
      <svg width="300" height="296" viewBox="0 0 300 296">
          <polyline *ngIf="raum1FlagFrei && !raum1FlagReserviert && !raum1FlagBelegt" points="13,148,135,148,135,280,13,280" fill="rgba(0,255,0,0.5)" stroke="blue"></polyline>
          <polyline *ngIf="raum2FlagFrei && !raum2FlagReserviert && !raum2FlagBelegt" points="285,148,187,148,187,280,285,280" fill="rgba(0,255,0,0.5)" stroke="blue"></polyline>
          <polyline *ngIf="raum3FlagFrei && !raum3FlagReserviert && !raum3FlagBelegt" points="13,14,120,14,120,142,13,142" fill="rgba(0,255,0,0.5)" stroke="blue"></polyline>
          <polyline *ngIf="!raum1FlagFrei && raum1FlagReserviert && !raum1FlagBelegt" points="13,148,135,148,135,280,13,280" fill="rgba(255,69,0,0.5)" stroke="blue"></polyline>
          <polyline *ngIf="!raum2FlagFrei && raum2FlagReserviert && !raum2FlagBelegt" points="285,148,187,148,187,280,285,280" fill="rgba(255,69,0,0.5)" stroke="blue"></polyline>
          <polyline *ngIf="!raum3FlagFrei && raum3FlagReserviert && !raum3FlagBelegt" points="13,14,120,14,120,142,13,142" fill="rgba(255,69,0,0.5)" stroke="blue"></polyline>
          <polyline *ngIf="!raum1FlagFrei && raum1FlagReserviert && raum1FlagBelegt" points="13,148,135,148,135,280,13,280" fill="rgba(255,0,0,0.5)" stroke="blue"></polyline>
          <polyline *ngIf="!raum2FlagFrei && raum2FlagReserviert && raum2FlagBelegt" points="285,148,187,148,187,280,285,280" fill="rgba(255,0,0,0.5)" stroke="blue"></polyline>
          <polyline *ngIf="!raum3FlagFrei && raum3FlagReserviert && raum3FlagBelegt" points="13,14,120,14,120,142,13,142" fill="rgba(255,0,0,0.5)" stroke="blue"></polyline>       
      </svg>
    </div>
  </div>
  <div id="image-container_medium" *ngIf="toggleMapOrList">
    <img src="/assets/test2.jpg" usemap="#image-map_medium" width="400" height="395">
    <map name="image-map_medium">
        <area target="" alt="Büro1" title="Büro1" (click)="goToCreatPage('r1')" coords="17,197,180,197,180,373,17,373" shape="poly">
        <area target="" alt="Büro2" title="Büro2" (click)="goToCreatPage('r2')" coords="251,197,380,197,380,373,251,373" shape="poly">
        <area target="" alt="Büro3" title="Büro3" (click)="goToCreatPage('r3')" coords="17,20,159,18,159,191,17,191" shape="poly">
    </map>
    <!--
      rot: rgba(255,0,0,0.5)
      grün: rgba(0,255,0,0.5)
      orange: rgba(255,69,0,0.5)
    -->
    <div class="overlay" style="width:400px; height: 395px;" >
      <svg width="400" height="395" viewBox="0 0 400 395">
          <polyline *ngIf="raum1FlagFrei && !raum1FlagReserviert && !raum1FlagBelegt" points="17,197,180,197,180,373,17,373" fill="rgba(0,255,0,0.5)" stroke="blue"></polyline>
          <polyline *ngIf="raum2FlagFrei && !raum2FlagReserviert && !raum2FlagBelegt" points="251,197,380,197,380,373,251,373" fill="rgba(0,255,0,0.5)" stroke="blue"></polyline>
          <polyline *ngIf="raum3FlagFrei && !raum3FlagReserviert && !raum3FlagBelegt" points="17,20,159,18,159,191,17,191" fill="rgba(0,255,0,0.5)" stroke="blue"></polyline>
          <polyline *ngIf="!raum1FlagFrei && raum1FlagReserviert && !raum1FlagBelegt" points="17,197,180,197,180,373,17,373" fill="rgba(255,69,0,0.5)" stroke="blue"></polyline>
          <polyline *ngIf="!raum2FlagFrei && raum2FlagReserviert && !raum2FlagBelegt" points="251,197,380,197,380,373,251,373" fill="rgba(255,69,0,0.5)" stroke="blue"></polyline>
          <polyline *ngIf="!raum3FlagFrei && raum3FlagReserviert && !raum3FlagBelegt" points="17,20,159,18,159,191,17,191" fill="rgba(255,69,0,0.5)" stroke="blue"></polyline>
          <polyline *ngIf="!raum1FlagFrei && raum1FlagReserviert && raum1FlagBelegt" points="17,197,180,197,180,373,17,373" fill="rgba(255,0,0,0.5)" stroke="blue"></polyline>
          <polyline *ngIf="!raum2FlagFrei && raum2FlagReserviert && raum2FlagBelegt" points="251,197,380,197,380,373,251,373" fill="rgba(255,0,0,0.5)" stroke="blue"></polyline>
          <polyline *ngIf="!raum3FlagFrei && raum3FlagReserviert && raum3FlagBelegt" points="17,20,159,18,159,191,17,191" fill="rgba(255,0,0,0.5)" stroke="blue"></polyline>       
      </svg>
    </div>
  </div>
  <div id="image-container_large" *ngIf="toggleMapOrList">
    <img src="/assets/test3.jpg" usemap="#image-map_large" width="600" height="592">
    <map name="image-map_large">
        <area target="" alt="Büro1" title="Büro1" (click)="goToCreatPage('r1')" coords="25,294,271,294,271,560,25,560" shape="poly">
        <area target="" alt="Büro2" title="Büro2" (click)="goToCreatPage('r2')" coords="378,294,572,294,572,562,378,562" shape="poly">
        <area target="" alt="Büro3" title="Büro3" (click)="goToCreatPage('r3')" coords="25,29,240,29,240,288,25,288" shape="poly">
    </map>
    <!--
      rot: rgba(255,0,0,0.5)
      grün: rgba(0,255,0,0.5)
      orange: rgba(255,69,0,0.5)
    -->
    <div class="overlay" style="width:600px; height: 592px;" >
      <svg width="600" height="592" viewBox="0 0 600 592">
          <polyline *ngIf="raum1FlagFrei && !raum1FlagReserviert && !raum1FlagBelegt" points="25,294,271,294,271,560,25,560" fill="rgba(0,255,0,0.5)" stroke="blue"></polyline>
          <polyline *ngIf="raum2FlagFrei && !raum2FlagReserviert && !raum2FlagBelegt" points="378,294,572,294,572,562,378,562" fill="rgba(0,255,0,0.5)" stroke="blue"></polyline>
          <polyline *ngIf="raum3FlagFrei && !raum3FlagReserviert && !raum3FlagBelegt" points="25,29,240,29,240,288,25,288" fill="rgba(0,255,0,0.5)" stroke="blue"></polyline>
          <polyline *ngIf="!raum1FlagFrei && raum1FlagReserviert && !raum1FlagBelegt" points="25,294,271,294,271,560,25,560" fill="rgba(255,69,0,0.5)" stroke="blue"></polyline>
          <polyline *ngIf="!raum2FlagFrei && raum2FlagReserviert && !raum2FlagBelegt" points="378,294,572,294,572,562,378,562" fill="rgba(255,69,0,0.5)" stroke="blue"></polyline>
          <polyline *ngIf="!raum3FlagFrei && raum3FlagReserviert && !raum3FlagBelegt" points="25,29,240,29,240,288,25,288" fill="rgba(255,69,0,0.5)" stroke="blue"></polyline>
          <polyline *ngIf="!raum1FlagFrei && raum1FlagReserviert && raum1FlagBelegt" points="25,294,271,294,271,560,25,560" fill="rgba(255,0,0,0.5)" stroke="blue"></polyline>
          <polyline *ngIf="!raum2FlagFrei && raum2FlagReserviert && raum2FlagBelegt" points="378,294,572,294,572,562,378,562" fill="rgba(255,0,0,0.5)" stroke="blue"></polyline>
          <polyline *ngIf="!raum3FlagFrei && raum3FlagReserviert && raum3FlagBelegt" points="25,29,240,29,240,288,25,288" fill="rgba(255,0,0,0.5)" stroke="blue"></polyline>       
      </svg>
    </div>
  </div>
  <div *ngIf="!toggleMapOrList">
    <ion-item>
      <ion-label>Aktuelle Meetings:</ion-label>
    </ion-item>
    <ion-list *ngFor="let m of query | async; let i=index">
        <ion-item id='m.id'>
          <ion-card>
            <ion-card-header>
              <ion-card-subtitle>{{m.room}}</ion-card-subtitle>
              <ion-card-title>{{m.dateAndTimeStart}} - {{m.dateAndTimeEnd}}</ion-card-title>
            </ion-card-header>
            <ion-card-content>Host: {{m.hostName}}</ion-card-content>
          </ion-card>
        </ion-item>
      </ion-list>
  </div>
</ion-content>
